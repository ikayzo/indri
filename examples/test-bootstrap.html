<!DOCTYPE html>
<html>

<head>
	<link rel="stylesheet" type="text/css" href="css/reset.css">
	<script type="text/javascript" src="js/jquery-1.10.2.js"></script>

	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">

	<style type="text/css">
		/* Bootstrap specific styles */
		.modal { width: 80%; margin: 0 10%; left: 0; height: 80%;}
	</style>
	<link rel="stylesheet" type="text/css" href="indri-0.5.0/indri.min.css">
</head>

<body>
	<h2>Indri with Bootstrap test page</h2>
	<div>
		File system:
		<select id="fileSystem">
			<option value="local">Local file system</option>
			<option value="ikayzo">Ikayzo S3</option>
			<option value="civilbeat">Civil Beat S3</option>
		</select>
	</div>

	<div>
		<button id="openBtn">Open...</button>
		<button id="saveBtn">Save...</button>
		<button id="debugBtn">Debug...</button>
	</div>

	<div id="indriDialog" class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true"></div>

	Results:
    <div id="results">Dialog not opened yet.</div>
    <hr>
  </div>

  <script type="text/javascript" src="indri-0.5.0/indri.min.js"></script>
  <script type="text/javascript" src="js/test-common.js"></script>

  <script type="text/javascript">

    jQuery(document).ready(function() {
        function showDialog(defaults) {
        jQuery('#indriDialog').load('indri-0.5.0/templates/indri.html', function() {
          var initializer = getDialogInitializer(defaults);

          initializer.resultCallback = function(result) { 
          jQuery('#indriDialog').modal('hide'); 

          console.log(result); 
          if(result.success){
          jQuery("#results").html("Selected items: " + JSON.stringify(result.results));						
          }
          else {
          jQuery("#results").html("Operation cancelled.");
          }
          };

          FileBrowser.attach(jQuery(this).children("div").first(), new FileSystemManager("http://indri-filesystem.herokuapp.com/"), initializer);
          jQuery('#indriDialog').modal('show'); 
          });
        }

        jQuery("#openBtn").click(function() { showDialog(FileBrowser.prototype.OpenDialogInitializer); });
        jQuery("#saveBtn").click(function() { showDialog(FileBrowser.prototype.SaveDialogInitializer); });
        jQuery("#debugBtn").click(function() { showDialog(FileBrowser.prototype.DebugDialogInitializer); });
    });
  </script>

</body>
</html>
