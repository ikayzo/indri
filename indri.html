<!DOCTYPE html>
<html>

<head>
	<script type="text/javascript" src="js/3rdparty/jquery-1.10.2.js"></script>
	<link href="css/reset.css" rel="stylesheet" type="text/css">
    <link href="css/indri.css" rel="stylesheet" type="text/css">
</head>

<body>
	<div id="browserui"><!-- Marks the top-most DOM element for the javascript -->

		<header id="header-wrapper" class="ind-wrapper">
			<div id="title-control">File Dialog</div>
			<div class="ind-panel clearfix" id="control-panel">
				<div class="ind-cell" id="location-controls" >
					<button id="parent-control" class="btn">Parent</button>
					<button id="refresh-control" class="btn">Refresh</button>
					<a id="parent-control" class="entypo icon-parent"><span>&#9666;</span></a>
					<a id="refresh-control" class="entypo icon-refresh"><span>&#128260;</span></a>
					<div id="location-display">Location</div>
				</div><!-- End LH Controls -->

				<div class="ind-cell" id="layout-controls">
					<div id="view-controls" class="ind-layout-controls"></div>
					<div id="detail-controls" class="ind-layout-controls">
						<a id="detail-control" class="ind-detailbutton entypo"><span>&#59146;</span></a>
					</div>
				</div><!-- End RH Controls -->
			</div>
		</header><!-- End Header -->

		<section id="section-wrapper" class="ind-wrapper">
			<div class="ind-panel" id="contents-panel">
				<div class="ind-cell" id="shortcuts-controls"></div>
				<div class="ind-cell" id="contents-display"></div>
			</div>
		</section><!-- End Main Content -->

		<aside id="aside-wrapper">
			<div class="ind-cell" id="preview-panel"></div> 
		</aside><!-- End Preview -->

		<footer id="footer-wrapper" class="ind-wrapper">
			<div class="ind-panel clearfix" id="filename-panel">
				<div class="ind-cell">
					<button id="newfolder-control" class="btn">New Folder</button>
					<button id="delete-control" class="btn" disabled>Delete</button>
					<button id="rename-control" class="btn" disabled>Rename</button>
				</div>

				<div class="ind-cell">
					<input id="filename-control"></input>
					<span id="filter-controls"></span>					
					<button id="accept-control" class="btn primary">OK</button>
					<button id="cancel-control" class="btn primary">Cancel</button>
				</div>
			</div>

			<div class="ind-panel" id="status-panel">
				<div class="ind-cell" id="status-display">Current status</div>
			</div>
		</footer><!-- End Footer -->
		
	</div><!-- End Main Wrapper -->

<script type="text/javascript" src="js/indri.fsm.js"></script>
<script type="text/javascript" src="js/indri.base.js"></script>
<script type="text/javascript" src="js/indri.content.renderer.base.js"></script>
<script type="text/javascript" src="js/indri.content.renderers.js"></script>
<script type="text/javascript" src="js/indri.location.renderers.js"></script>
<script type="text/javascript" src="js/indri.main.js"></script>

<script type="text/javascript">

$(document).ready(function() {
	var initializer = jQuery.extend(true, {}, FileBrowser.prototype.DebugDialogInitializer);

	initializer.visibility.shortcuts = false;

	initializer.filter.options.push({ value: "\.(htm|html)$", text: "HTML files (*.htm, *.html)"});
	initializer.filter.options.push({ value: "\.js$", text: "Javascript files (*.js)"});
	initializer.filter.options.push({ value: "\.(jpg|png)", text: "Image files (*.jpg, *.png)"});

	initializer.viewFactory.views.push(new IconContentRenderer());
	initializer.viewFactory.views.push(new DetailContentRenderer());

	initLocalFileSystem(initializer);
//	initAwsFileSystem(initializer);
//	initCivilBeatFileSystem(initializer);

	var fileBrowser = new FileBrowser(jQuery("#browserui"), new FileSystemManager("http://localhost:1337/"), initializer);

	function initLocalFileSystem(initializer) {
		initializer.locationRenderer = new SegmentedLocationRenderer();
	}

	function initAwsFileSystem(initializer) {
		initializer.visibility.shortcuts = true;

		initializer.locationRenderer = new BucketLocationRenderer();

		initializer.previewRenderer.baseUrl = 'http://ikayzo-files.s3.amazonaws.com/';
	}

	function initCivilBeatFileSystem(initializer) {
		initializer.visibility.shortcuts = true;

		initializer.locationRenderer = new BucketLocationRenderer();

		initializer.previewRenderer.baseUrl = 'http://civilbeat_production.s3.amazonaws.com/';
	}
});

</script>
</body>
</html>